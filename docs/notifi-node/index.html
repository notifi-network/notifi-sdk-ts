<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@notifi-network/notifi-node</title><meta name="description" content="Documentation for @notifi-network/notifi-node"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@notifi-network/notifi-node</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@notifi-network/notifi-node</h2></div><div class="tsd-panel tsd-typography"><a id="md:notifi-node-notifi-networknotifi-node" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Notifi Node (@notifi-network/notifi-node)<a href="#md:notifi-node-notifi-networknotifi-node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This SDK is intended for use with <em>Servers</em> who have obtained a SID / Secret pair from Notifi.
Please reach out to us for help on <a href="https://discord.gg/nAqR3mk3rv" target="_blank" class="external">Discord</a>!</p>
<p>This SDK allows you to interact with Notifi Tenant specific services, such as creating users, sending notifications. It is particularly useful when you want to have a custom server-side application. For example, sending notifications automatically when a certain event occurs.</p>
<blockquote>
<p>To authenticate with Notifi Node SDK to get the valid auth token, it requires specific server credentials, <code>SID</code> and <code>Secret</code>. You can get these credentials from Notifi Admin Panel --&gt; Account Settings --&gt; Account Keys (top right corner) --&gt; <code>Show Sid/Secret</code>.
If you not yet have an Notifi tenant account, feel free to register a new tenant at <a href="https://admin.notifi.network/" target="_blank" class="external">Notifi Admin Panel</a> for free.</p>
</blockquote>
<a id="md:prerequisites" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Prerequisites<a href="#md:prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Node.js &gt;= 18 (LTS with corresponding npm version)</li>
</ul>
<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:installation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Install <code>@notifi-network/notifi-node</code> package using npm or yarn:</p>
<pre><code class="bash"><span class="hl-0"># NPM</span><br/><span class="hl-1">npm</span><span class="hl-2"> </span><span class="hl-3">install</span><span class="hl-2"> </span><span class="hl-3">@notifi-network/notifi-node</span><br/><span class="hl-0"># Yarn</span><br/><span class="hl-1">yarn</span><span class="hl-2"> </span><span class="hl-3">add</span><span class="hl-2"> </span><span class="hl-3">@notifi-network/notifi-node</span>
</code><button type="button">Copy</button></pre>

<a id="md:getting-started" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting Started<a href="#md:getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:instantiating-a-notifinodeclient" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Instantiating a NotifiNodeClient<a href="#md:instantiating-a-notifinodeclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>NotifiNodeClient</code> instance behaves as an proxy of <code>NotifiService</code> which is a wrapper around the Notifi GraphQL API. By interacting with <code>NotifiNodeClient</code>, we can perform various admin leven server methods such as creating users, sending notifications, etc.</p>
<p>It requires to pass in <code>GraphqlClient</code>, <code>DataPlaneClient</code> and <code>SubscriptionService</code> instances in order to instantiate a <code>NotifiService</code> object. The <code>NotifiService</code> object is then passed to the <code>NotifiClient</code> constructor. Example:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">NotifiClient</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">createGraphQLClient</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">createNotifiService</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&#39;@notifi-network/notifi-node&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">gqlClient</span><span class="hl-2"> = </span><span class="hl-1">createGraphQLClient</span><span class="hl-2">();</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">dpapiClient</span><span class="hl-2"> = </span><span class="hl-1">createDataplaneClient</span><span class="hl-2">();</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">subService</span><span class="hl-2"> = </span><span class="hl-1">createNotifiSubscriptionService</span><span class="hl-2">();</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">notifiService</span><span class="hl-2"> = </span><span class="hl-1">createNotifiService</span><span class="hl-2">(</span><span class="hl-5">graphqlClient</span><span class="hl-2">, </span><span class="hl-5">subService</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Instantiate a NotifiNodeClient</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">client</span><span class="hl-2"> = </span><span class="hl-6">new</span><span class="hl-2"> </span><span class="hl-1">NotifiNodeClient</span><span class="hl-2">(</span><span class="hl-5">notifiService</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>NOTE</strong>:</p>
<ul>
<li><code>GraphqlClient</code> is used to interact with the Notifi GraphQL Mutations and Queries.</li>
<li><code>DataPlaneClient</code> is used to interact with the Notifi Data Plane API.</li>
<li><code>SubscriptionService</code> is used to interact with the Notifi Subscription Service.</li>
</ul>
</blockquote>
<a id="md:login-or-initialize-notifinodeclient" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Login or initialize NotifiNodeClient<a href="#md:login-or-initialize-notifinodeclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>In order to utilize the NotifiNodeClient methods, we firstly need to call the <code>logIn</code> by passing the tenant <code>SID</code> and <code>Secret</code> mentioned above. This method initializes the NotifiNodeClient and returns a <code>token</code> and <code>expiry</code>.</p>
<p>If we already have a valid token, we can directly call <code>initialize</code> method by passing the token.</p>
<pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">sid</span><span class="hl-2"> = </span><span class="hl-3">&#39;your-notifi-tenant-sid&#39;</span><span class="hl-2">;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">secret</span><span class="hl-2"> = </span><span class="hl-3">&#39;your-notifi-tenant-secret&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Either login</span><br/><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-7">token</span><span class="hl-2">, </span><span class="hl-7">_expiry</span><span class="hl-2"> } = </span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">logIn</span><span class="hl-2">({</span><br/><span class="hl-2">  </span><span class="hl-5">sid</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">secret</span><span class="hl-2">,</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-0">// Or,iff already have a valid token, directly initialize client</span><br/><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">initialize</span><span class="hl-2">(</span><span class="hl-5">token</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<p>You can obtain the client status by calling <code>client.status</code>.</p>
<ul>
<li>If the client is uninitialized, it will return <code>NotifiNodeclientUninitializedState</code></li>
<li>If the client is initialized, it will return <code>NotifiNodeclientInitializedState</code></li>
</ul>
<pre><code class="ts"><span class="hl-0">// uninitialized</span><br/><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-7">status</span><span class="hl-2"> } = </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-5">status</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// initialized</span><br/><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-7">status</span><span class="hl-2">, </span><span class="hl-7">jwt</span><span class="hl-2"> } = </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-5">status</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>NOTE</strong>: Make sure not to expose the <code>SID</code>, <code>Secret</code> and <code>Token (jwt)</code> publicly. Otherwise, it could be abused by malicious users.</p>
</blockquote>
<a id="md:creating-a-user" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Creating a User<a href="#md:creating-a-user" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-7">status</span><span class="hl-2"> } = </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-5">status</span><span class="hl-2">;</span><br/><span class="hl-4">if</span><span class="hl-2"> (!</span><span class="hl-5">status</span><span class="hl-2"> === </span><span class="hl-3">&#39;initialized&#39;</span><span class="hl-2">) </span><span class="hl-4">throw</span><span class="hl-2"> </span><span class="hl-6">new</span><span class="hl-2"> </span><span class="hl-1">Error</span><span class="hl-2">(</span><span class="hl-3">&#39;Client not initialized&#39;</span><span class="hl-2">);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">userId</span><span class="hl-2"> = </span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">createTenantUser</span><span class="hl-2">(</span><span class="hl-5">token</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-5">walletBlockchain:</span><span class="hl-2"> </span><span class="hl-3">&#39;ETHEREUM&#39;</span><span class="hl-2">, </span><span class="hl-0">// Or other notifi supported blockchain: https://docs.notifi.network/notifi-sdk-ts/modules/_internal_.html#WalletBlockchain</span><br/><span class="hl-2">  </span><span class="hl-5">walletPublicKey:</span><span class="hl-2"> </span><span class="hl-3">&#39;user-wallet-public-key&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-0">// You can start sending notifications to this user</span>
</code><button type="button">Copy</button></pre>

<a id="md:sending-a-notification-message" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Sending a Notification message<a href="#md:sending-a-notification-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <code>publishFusionMessage</code> method to send one or more messages to the users. The example below sends a notification to the all users who have subscribed to the <code>event-type-id</code>.</p>
<pre><code class="ts"><span class="hl-4">if</span><span class="hl-2"> (!</span><span class="hl-5">status</span><span class="hl-2"> === </span><span class="hl-3">&#39;initialized&#39;</span><span class="hl-2">) </span><span class="hl-4">throw</span><span class="hl-2"> </span><span class="hl-6">new</span><span class="hl-2"> </span><span class="hl-1">Error</span><span class="hl-2">(</span><span class="hl-3">&#39;Client not initialized&#39;</span><span class="hl-2">);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">messagePayloads</span><span class="hl-2"> = [</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-5">eventTypeId:</span><span class="hl-2"> </span><span class="hl-3">&#39;event-type-id&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">variablesJson:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-0">/** Could be any shape of object according to the need of template */</span><br/><span class="hl-2">      </span><span class="hl-5">fromAddress:</span><span class="hl-2"> </span><span class="hl-3">&#39;from-wallet-address&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-5">toAddress:</span><span class="hl-2"> </span><span class="hl-3">&#39;to-wallet-address&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-5">amount:</span><span class="hl-2"> </span><span class="hl-3">&#39;amount&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-5">currency:</span><span class="hl-2"> </span><span class="hl-3">&#39;ETH&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-0">// Passing `specificWallets` optionally if you want to send to specific users. By default, it sends to all users who have subscribed to the `event-type-id`.</span><br/><span class="hl-2">    </span><span class="hl-0">// specificWallets: [{</span><br/><span class="hl-2">    </span><span class="hl-0">//   walletBlockchain: &#39;ETHEREUM&#39;,</span><br/><span class="hl-2">    </span><span class="hl-0">//   walletPublicKey: &#39;user-wallet-public-key&#39;,</span><br/><span class="hl-2">    </span><span class="hl-0">// }]</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">];</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">result</span><span class="hl-2"> = </span><span class="hl-4">await</span><span class="hl-2"> </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">publishFusionMessage</span><span class="hl-2">(</span><span class="hl-5">fusionMessages</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>NOTE:</p>
<ul>
<li>The <code>variablesJson</code> parameter is the set of variables that will be used when rendering your templates. If you have a variable <code>fromAddress</code>, for example, you can display it in the template with the expression <code>{{ eventData.fromAddress }}</code></li>
</ul>
</blockquote>
<a id="md:receiving-active-alerts-under-a-tenant" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Receiving active alerts under a tenant<a href="#md:receiving-active-alerts-under-a-tenant" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <code>getActiveAlerts</code> method to get all active alerts under the tenant.</p>
<pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">first</span><span class="hl-2"> = </span><span class="hl-8">10</span><span class="hl-2">; </span><span class="hl-0">// Number of alerts to fetch</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">after</span><span class="hl-2"> = </span><span class="hl-3">&#39;the-cursor&#39;</span><span class="hl-2">; </span><span class="hl-0">// Cursor to fetch the alerts after</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">result</span><span class="hl-2"> = </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">getActiveAlerts</span><span class="hl-2">({ </span><span class="hl-5">first</span><span class="hl-2">, </span><span class="hl-5">after</span><span class="hl-2">, </span><span class="hl-5">fusionEventIds</span><span class="hl-2"> });</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>You can get the cursor (in <a href="https://docs.notifi.network/notifi-sdk-ts/modules/_internal_.html#PageInfoFragmentFragment" target="_blank" class="external">PageInfo</a>) from the <code>result</code> object to fetch the next set of alerts.</p>
</blockquote>
<a id="md:listening-to-events" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Listening to events<a href="#md:listening-to-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Notifi Node SDK provides a way to listen to the events using the <code>addEventListener</code> method. There are three main categories of events:</p>
<ul>
<li><a href="#md:1-graphql-subscription-events">GraphQL subscription events</a></li>
<li><a href="#md:2-websocket-status-events">WebSocket status events</a></li>
<li><a href="#md:3-graphql-subscription-status">GraphQL subscription status</a></li>
</ul>
<a id="md:1-graphql-subscription-events" class="tsd-anchor"></a><h4 class="tsd-anchor-link">1. GraphQL subscription events<a href="#md:1-graphql-subscription-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Notifi provides several GraphQL subscription events by which we can easily tracking the entity changes. When listening to this category of events, it returns a <code>Subscription</code> object which is used to stop the Graphql subscription.</p>
<ul>
<li><code>tenantActiveAlertChanged</code>: When the active alert is changed (created or deleted).</li>
</ul>
<p>To stop listening to the events, we need to do the following:</p>
<ol>
<li>Call the <code>subscription.unsubscribe</code> method. This will stop the Graphql subscription.</li>
<li>Call the <code>removeEventListener</code> method with the event name and the callback function. This will remove the event listener.</li>
</ol>
<p><strong>Example:</strong></p>
<pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-1">eventHandler</span><span class="hl-2"> = (</span><span class="hl-5">event</span><span class="hl-2">) </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&#39;Event received:&#39;</span><span class="hl-2">, </span><span class="hl-5">event</span><span class="hl-2">);</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// Listen to the tenant entity updated event</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">subscription</span><span class="hl-2"> = </span><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-3">&#39;tenantActiveAlertChanged&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">eventHandler</span><span class="hl-2">,</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Stop the subscription</span><br/><span class="hl-5">subscription</span><span class="hl-2">.</span><span class="hl-1">unsubscribe</span><span class="hl-2">();</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;tenantActiveAlertChanged&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:2-websocket-status-events-" class="tsd-anchor"></a><h4 class="tsd-anchor-link">2. WebSocket status events :<a href="#md:2-websocket-status-events-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><blockquote>
<p>NOTE: This events are particularly for some advanced use cases especially when you want to interact with the WebSocket connection.
Example, you can utilize the WebSocket client object from <code>wsConnected</code> handler to dispose the WebSocket connection.</p>
</blockquote>
<p>Since websocket connection is automatically opened when the GraphQL subscription is started, we might listen to the WebSocket status events to understand the status of the WebSocket connection under some circumstances.</p>
<ul>
<li><code>wsConnected</code>: When the WebSocket connection is established.</li>
<li><code>wsConnecting</code>: When the WebSocket connection is being established.</li>
<li><code>wsClosed</code>: When the WebSocket connection is closed.</li>
<li><code>wsError</code>: When there is an error in the WebSocket connection.</li>
</ul>
<p>To stop listening to the WebSocket status events, simply call the <code>removeEventListener</code> method with the event name and the callback function.</p>
<p><strong>Example:</strong></p>
<pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-1">eventHandler</span><span class="hl-2"> = (</span><span class="hl-5">event</span><span class="hl-2">) </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&#39;Event received:&#39;</span><span class="hl-2">, </span><span class="hl-5">event</span><span class="hl-2">);</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// Listen to the WebSocket status events (The return type of addEventListener is never)</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsConnected&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsConnecting&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsClosed&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsError&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Stop listening to the WebSocket status events</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsConnected&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsConnecting&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsClosed&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;wsError&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:3-graphql-subscription-status" class="tsd-anchor"></a><h4 class="tsd-anchor-link">3. GraphQL subscription status:<a href="#md:3-graphql-subscription-status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>We can also listen to the following events to understand the status of the GraphQL subscription:</p>
<ul>
<li><code>gqlSubscriptionError</code>: When there is an error in the GraphQL subscription.</li>
<li><code>gqlComplete</code>: When the GraphQL subscription is completed.</li>
</ul>
<p>To stop listening to the GraphQL subscription status events, simply call the <code>removeEventListener</code> method with the event name and the callback function.</p>
<pre><code class="ts"><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-1">eventHandler</span><span class="hl-2"> = (</span><span class="hl-5">event</span><span class="hl-2">) </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&#39;Event received:&#39;</span><span class="hl-2">, </span><span class="hl-5">event</span><span class="hl-2">);</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// Listen to the GraphQL subscription status events (The return type of addEventListener is never)</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;gqlSubscriptionError&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;gqlComplete&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Stop listening to the GraphQL subscription status events</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;gqlSubscriptionError&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span><br/><span class="hl-5">client</span><span class="hl-2">.</span><span class="hl-1">removeEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;gqlComplete&#39;</span><span class="hl-2">, </span><span class="hl-5">eventHandler</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:more-example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">More example<a href="#md:more-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="">notifi-node-sample</a>: An example demonstrating how to use the <code>@notifi-network/notifi-node</code> package on express.js server.</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:notifi-node-notifi-networknotifi-node"><span>Notifi <wbr/>Node (@notifi-<wbr/>network/notifi-<wbr/>node)</span></a><ul><li><a href="#md:prerequisites"><span>Prerequisites</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:installation"><span>Installation</span></a></li></ul></li><li><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#md:instantiating-a-notifinodeclient"><span>Instantiating a <wbr/>Notifi<wbr/>Node<wbr/>Client</span></a></li><li><a href="#md:login-or-initialize-notifinodeclient"><span>Login or initialize <wbr/>Notifi<wbr/>Node<wbr/>Client</span></a></li><li><a href="#md:creating-a-user"><span>Creating a <wbr/>User</span></a></li><li><a href="#md:sending-a-notification-message"><span>Sending a <wbr/>Notification message</span></a></li><li><a href="#md:receiving-active-alerts-under-a-tenant"><span>Receiving active alerts under a tenant</span></a></li><li><a href="#md:listening-to-events"><span>Listening to events</span></a></li><li><ul><li><a href="#md:1-graphql-subscription-events"><span>1. <wbr/>GraphQL subscription events</span></a></li><li><a href="#md:2-websocket-status-events-"><span>2. <wbr/>Web<wbr/>Socket status events :</span></a></li><li><a href="#md:3-graphql-subscription-status"><span>3. <wbr/>GraphQL subscription status:</span></a></li></ul></li></ul></li><li><a href="#md:more-example"><span>More example</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@notifi-network/notifi-node</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
