
echo "Running pre-push hook..."

echo "ğŸ” Checking code format with Prettier..."
if ! npx prettier --config .prettierrc packages/**/lib/**/*.ts* --check; then
    echo "âŒ Code format check failed. Please run 'npm run format' and commit the changes."
    exit 1
fi
echo "âœ… Code format check passed!"

echo "ğŸ” Running lint check..."
if npm run lint; then
    echo "âœ… Lint check passed!"
else
    lint_exit_code=$?
    if [ $lint_exit_code -ge 2 ]; then
        echo "âŒ Lint check failed with errors. Please fix the errors."
        exit 1
    else
        echo "âš ï¸ Lint check completed with warnings (push allowed)"
    fi
fi

echo "ğŸ” Running build check..."
if ! npm run build; then
    echo "âŒ Build failed. Please fix build errors."
    exit 1
fi
echo "âœ… Build check passed!"

echo "ğŸ‰ All checks passed! Ready to push."  
